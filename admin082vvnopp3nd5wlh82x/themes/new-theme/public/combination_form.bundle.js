(()=>{var e={1594:function(e,t,i){var r;!function(){"use strict";var n,o=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,c=Math.floor,a="[BigNumber Error] ",l=a+"Number primitive has more than 15 significant digits: ",u=1e14,p=14,f=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,m=1e9;function g(e){var t=0|e;return e>0||e===t?t:t-1}function b(e){for(var t,i,r=1,n=e.length,o=e[0]+"";r<n;){for(t=e[r++]+"",i=p-t.length;i--;t="0"+t);o+=t}for(n=o.length;48===o.charCodeAt(--n););return o.slice(0,n+1||1)}function w(e,t){var i,r,n=e.c,o=t.c,s=e.s,c=t.s,a=e.e,l=t.e;if(!s||!c)return null;if(i=n&&!n[0],r=o&&!o[0],i||r)return i?r?0:-c:s;if(s!=c)return s;if(i=s<0,r=a==l,!n||!o)return r?0:!n^i?1:-1;if(!r)return a>l^i?1:-1;for(c=(a=n.length)<(l=o.length)?a:l,s=0;s<c;s++)if(n[s]!=o[s])return n[s]>o[s]^i?1:-1;return a==l?0:a>l^i?1:-1}function y(e,t,i,r){if(e<t||e>i||e!==c(e))throw Error(a+(r||"Argument")+("number"==typeof e?e<t||e>i?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function v(e){var t=e.c.length-1;return g(e.e/p)==t&&e.c[t]%2!=0}function x(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function S(e,t,i){var r,n;if(t<0){for(n=i+".";++t;n+=i);e=n+e}else if(++t>(r=e.length)){for(n=i,t-=r;--t;n+=i);e+=n}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}n=function e(t){var i,r,n,_,I,E,N,P,O,T,A=q.prototype={constructor:q,toString:null,valueOf:null},C=new q(1),F=20,M=4,R=-7,D=21,B=-1e7,$=1e7,k=!1,j=1,U=0,G={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},L="0123456789abcdefghijklmnopqrstuvwxyz",z=!0;function q(e,t){var i,s,a,u,h,d,m,g,b=this;if(!(b instanceof q))return new q(e,t);if(null==t){if(e&&!0===e._isBigNumber)return b.s=e.s,void(!e.c||e.e>$?b.c=b.e=null:e.e<B?b.c=[b.e=0]:(b.e=e.e,b.c=e.c.slice()));if((d="number"==typeof e)&&0*e==0){if(b.s=1/e<0?(e=-e,-1):1,e===~~e){for(u=0,h=e;h>=10;h/=10,u++);return void(u>$?b.c=b.e=null:(b.e=u,b.c=[e]))}g=String(e)}else{if(!o.test(g=String(e)))return n(b,g,d);b.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}(u=g.indexOf("."))>-1&&(g=g.replace(".","")),(h=g.search(/e/i))>0?(u<0&&(u=h),u+=+g.slice(h+1),g=g.substring(0,h)):u<0&&(u=g.length)}else{if(y(t,2,L.length,"Base"),10==t&&z)return W(b=new q(e),F+b.e+1,M);if(g=String(e),d="number"==typeof e){if(0*e!=0)return n(b,g,d,t);if(b.s=1/e<0?(g=g.slice(1),-1):1,q.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(l+e)}else b.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(i=L.slice(0,t),u=h=0,m=g.length;h<m;h++)if(i.indexOf(s=g.charAt(h))<0){if("."==s){if(h>u){u=m;continue}}else if(!a&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){a=!0,h=-1,u=0;continue}return n(b,String(e),d,t)}d=!1,(u=(g=r(g,t,10,b.s)).indexOf("."))>-1?g=g.replace(".",""):u=g.length}for(h=0;48===g.charCodeAt(h);h++);for(m=g.length;48===g.charCodeAt(--m););if(g=g.slice(h,++m)){if(m-=h,d&&q.DEBUG&&m>15&&(e>f||e!==c(e)))throw Error(l+b.s*e);if((u=u-h-1)>$)b.c=b.e=null;else if(u<B)b.c=[b.e=0];else{if(b.e=u,b.c=[],h=(u+1)%p,u<0&&(h+=p),h<m){for(h&&b.c.push(+g.slice(0,h)),m-=p;h<m;)b.c.push(+g.slice(h,h+=p));h=p-(g=g.slice(h)).length}else h-=m;for(;h--;g+="0");b.c.push(+g)}}else b.c=[b.e=0]}function V(e,t,i,r){var n,o,s,c,a;if(null==i?i=M:y(i,0,8),!e.c)return e.toString();if(n=e.c[0],s=e.e,null==t)a=b(e.c),a=1==r||2==r&&(s<=R||s>=D)?x(a,s):S(a,s,"0");else if(o=(e=W(new q(e),t,i)).e,c=(a=b(e.c)).length,1==r||2==r&&(t<=o||o<=R)){for(;c<t;a+="0",c++);a=x(a,o)}else if(t-=s,a=S(a,o,"0"),o+1>c){if(--t>0)for(a+=".";t--;a+="0");}else if((t+=o-c)>0)for(o+1==c&&(a+=".");t--;a+="0");return e.s<0&&n?"-"+a:a}function H(e,t){for(var i,r,n=1,o=new q(e[0]);n<e.length;n++)(!(r=new q(e[n])).s||(i=w(o,r))===t||0===i&&o.s===t)&&(o=r);return o}function K(e,t,i){for(var r=1,n=t.length;!t[--n];t.pop());for(n=t[0];n>=10;n/=10,r++);return(i=r+i*p-1)>$?e.c=e.e=null:i<B?e.c=[e.e=0]:(e.e=i,e.c=t),e}function W(e,t,i,r){var n,o,a,l,f,d,m,g=e.c,b=h;if(g){e:{for(n=1,l=g[0];l>=10;l/=10,n++);if((o=t-n)<0)o+=p,a=t,f=g[d=0],m=c(f/b[n-a-1]%10);else if((d=s((o+1)/p))>=g.length){if(!r)break e;for(;g.length<=d;g.push(0));f=m=0,n=1,a=(o%=p)-p+1}else{for(f=l=g[d],n=1;l>=10;l/=10,n++);m=(a=(o%=p)-p+n)<0?0:c(f/b[n-a-1]%10)}if(r=r||t<0||null!=g[d+1]||(a<0?f:f%b[n-a-1]),r=i<4?(m||r)&&(0==i||i==(e.s<0?3:2)):m>5||5==m&&(4==i||r||6==i&&(o>0?a>0?f/b[n-a]:0:g[d-1])%10&1||i==(e.s<0?8:7)),t<1||!g[0])return g.length=0,r?(t-=e.e+1,g[0]=b[(p-t%p)%p],e.e=-t||0):g[0]=e.e=0,e;if(0==o?(g.length=d,l=1,d--):(g.length=d+1,l=b[p-o],g[d]=a>0?c(f/b[n-a]%b[a])*l:0),r)for(;;){if(0==d){for(o=1,a=g[0];a>=10;a/=10,o++);for(a=g[0]+=l,l=1;a>=10;a/=10,l++);o!=l&&(e.e++,g[0]==u&&(g[0]=1));break}if(g[d]+=l,g[d]!=u)break;g[d--]=0,l=1}for(o=g.length;0===g[--o];g.pop());}e.e>$?e.c=e.e=null:e.e<B&&(e.c=[e.e=0])}return e}function Q(e){var t,i=e.e;return null===i?e.toString():(t=b(e.c),t=i<=R||i>=D?x(t,i):S(t,i,"0"),e.s<0?"-"+t:t)}return q.clone=e,q.ROUND_UP=0,q.ROUND_DOWN=1,q.ROUND_CEIL=2,q.ROUND_FLOOR=3,q.ROUND_HALF_UP=4,q.ROUND_HALF_DOWN=5,q.ROUND_HALF_EVEN=6,q.ROUND_HALF_CEIL=7,q.ROUND_HALF_FLOOR=8,q.EUCLID=9,q.config=q.set=function(e){var t,i;if(null!=e){if("object"!=typeof e)throw Error(a+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(y(i=e[t],0,m,t),F=i),e.hasOwnProperty(t="ROUNDING_MODE")&&(y(i=e[t],0,8,t),M=i),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((i=e[t])&&i.pop?(y(i[0],-m,0,t),y(i[1],0,m,t),R=i[0],D=i[1]):(y(i,-m,m,t),R=-(D=i<0?-i:i))),e.hasOwnProperty(t="RANGE"))if((i=e[t])&&i.pop)y(i[0],-m,-1,t),y(i[1],1,m,t),B=i[0],$=i[1];else{if(y(i,-m,m,t),!i)throw Error(a+t+" cannot be zero: "+i);B=-($=i<0?-i:i)}if(e.hasOwnProperty(t="CRYPTO")){if((i=e[t])!==!!i)throw Error(a+t+" not true or false: "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw k=!i,Error(a+"crypto unavailable");k=i}else k=i}if(e.hasOwnProperty(t="MODULO_MODE")&&(y(i=e[t],0,9,t),j=i),e.hasOwnProperty(t="POW_PRECISION")&&(y(i=e[t],0,m,t),U=i),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(i=e[t]))throw Error(a+t+" not an object: "+i);G=i}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(i=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(i))throw Error(a+t+" invalid: "+i);z="0123456789"==i.slice(0,10),L=i}}return{DECIMAL_PLACES:F,ROUNDING_MODE:M,EXPONENTIAL_AT:[R,D],RANGE:[B,$],CRYPTO:k,MODULO_MODE:j,POW_PRECISION:U,FORMAT:G,ALPHABET:L}},q.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!q.DEBUG)return!0;var t,i,r=e.c,n=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===o||-1===o)&&n>=-m&&n<=m&&n===c(n)){if(0===r[0]){if(0===n&&1===r.length)return!0;break e}if((t=(n+1)%p)<1&&(t+=p),String(r[0]).length==t){for(t=0;t<r.length;t++)if((i=r[t])<0||i>=u||i!==c(i))break e;if(0!==i)return!0}}}else if(null===r&&null===n&&(null===o||1===o||-1===o))return!0;throw Error(a+"Invalid BigNumber: "+e)},q.maximum=q.max=function(){return H(arguments,-1)},q.minimum=q.min=function(){return H(arguments,1)},q.random=(_=9007199254740992,I=Math.random()*_&2097151?function(){return c(Math.random()*_)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,i,r,n,o,l=0,u=[],f=new q(C);if(null==e?e=F:y(e,0,m),n=s(e/p),k)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(n*=2));l<n;)(o=131072*t[l]+(t[l+1]>>>11))>=9e15?(i=crypto.getRandomValues(new Uint32Array(2)),t[l]=i[0],t[l+1]=i[1]):(u.push(o%1e14),l+=2);l=n/2}else{if(!crypto.randomBytes)throw k=!1,Error(a+"crypto unavailable");for(t=crypto.randomBytes(n*=7);l<n;)(o=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(u.push(o%1e14),l+=7);l=n/7}if(!k)for(;l<n;)(o=I())<9e15&&(u[l++]=o%1e14);for(n=u[--l],e%=p,n&&e&&(o=h[p-e],u[l]=c(n/o)*o);0===u[l];u.pop(),l--);if(l<0)u=[r=0];else{for(r=-1;0===u[0];u.splice(0,1),r-=p);for(l=1,o=u[0];o>=10;o/=10,l++);l<p&&(r-=p-l)}return f.e=r,f.c=u,f}),q.sum=function(){for(var e=1,t=arguments,i=new q(t[0]);e<t.length;)i=i.plus(t[e++]);return i},r=function(){var e="0123456789";function t(e,t,i,r){for(var n,o,s=[0],c=0,a=e.length;c<a;){for(o=s.length;o--;s[o]*=t);for(s[0]+=r.indexOf(e.charAt(c++)),n=0;n<s.length;n++)s[n]>i-1&&(null==s[n+1]&&(s[n+1]=0),s[n+1]+=s[n]/i|0,s[n]%=i)}return s.reverse()}return function(r,n,o,s,c){var a,l,u,p,f,h,d,m,g=r.indexOf("."),w=F,y=M;for(g>=0&&(p=U,U=0,r=r.replace(".",""),h=(m=new q(n)).pow(r.length-g),U=p,m.c=t(S(b(h.c),h.e,"0"),10,o,e),m.e=m.c.length),u=p=(d=t(r,n,o,c?(a=L,e):(a=e,L))).length;0==d[--p];d.pop());if(!d[0])return a.charAt(0);if(g<0?--u:(h.c=d,h.e=u,h.s=s,d=(h=i(h,m,w,y,o)).c,f=h.r,u=h.e),g=d[l=u+w+1],p=o/2,f=f||l<0||null!=d[l+1],f=y<4?(null!=g||f)&&(0==y||y==(h.s<0?3:2)):g>p||g==p&&(4==y||f||6==y&&1&d[l-1]||y==(h.s<0?8:7)),l<1||!d[0])r=f?S(a.charAt(1),-w,a.charAt(0)):a.charAt(0);else{if(d.length=l,f)for(--o;++d[--l]>o;)d[l]=0,l||(++u,d=[1].concat(d));for(p=d.length;!d[--p];);for(g=0,r="";g<=p;r+=a.charAt(d[g++]));r=S(r,u,a.charAt(0))}return r}}(),i=function(){function e(e,t,i){var r,n,o,s,c=0,a=e.length,l=t%d,u=t/d|0;for(e=e.slice();a--;)c=((n=l*(o=e[a]%d)+(r=u*o+(s=e[a]/d|0)*l)%d*d+c)/i|0)+(r/d|0)+u*s,e[a]=n%i;return c&&(e=[c].concat(e)),e}function t(e,t,i,r){var n,o;if(i!=r)o=i>r?1:-1;else for(n=o=0;n<i;n++)if(e[n]!=t[n]){o=e[n]>t[n]?1:-1;break}return o}function i(e,t,i,r){for(var n=0;i--;)e[i]-=n,n=e[i]<t[i]?1:0,e[i]=n*r+e[i]-t[i];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,n,o,s,a){var l,f,h,d,m,b,w,y,v,x,S,_,I,E,N,P,O,T=r.s==n.s?1:-1,A=r.c,C=n.c;if(!(A&&A[0]&&C&&C[0]))return new q(r.s&&n.s&&(A?!C||A[0]!=C[0]:C)?A&&0==A[0]||!C?0*T:T/0:NaN);for(v=(y=new q(T)).c=[],T=o+(f=r.e-n.e)+1,a||(a=u,f=g(r.e/p)-g(n.e/p),T=T/p|0),h=0;C[h]==(A[h]||0);h++);if(C[h]>(A[h]||0)&&f--,T<0)v.push(1),d=!0;else{for(E=A.length,P=C.length,h=0,T+=2,(m=c(a/(C[0]+1)))>1&&(C=e(C,m,a),A=e(A,m,a),P=C.length,E=A.length),I=P,S=(x=A.slice(0,P)).length;S<P;x[S++]=0);O=C.slice(),O=[0].concat(O),N=C[0],C[1]>=a/2&&N++;do{if(m=0,(l=t(C,x,P,S))<0){if(_=x[0],P!=S&&(_=_*a+(x[1]||0)),(m=c(_/N))>1)for(m>=a&&(m=a-1),w=(b=e(C,m,a)).length,S=x.length;1==t(b,x,w,S);)m--,i(b,P<w?O:C,w,a),w=b.length,l=1;else 0==m&&(l=m=1),w=(b=C.slice()).length;if(w<S&&(b=[0].concat(b)),i(x,b,S,a),S=x.length,-1==l)for(;t(C,x,P,S)<1;)m++,i(x,P<S?O:C,S,a),S=x.length}else 0===l&&(m++,x=[0]);v[h++]=m,x[0]?x[S++]=A[I]||0:(x=[A[I]],S=1)}while((I++<E||null!=x[0])&&T--);d=null!=x[0],v[0]||v.splice(0,1)}if(a==u){for(h=1,T=v[0];T>=10;T/=10,h++);W(y,o+(y.e=h+f*p-1)+1,s,d)}else y.e=f,y.r=+d;return y}}(),E=/^(-?)0([xbo])(?=\w[\w.]*$)/i,N=/^([^.]+)\.$/,P=/^\.([^.]+)$/,O=/^-?(Infinity|NaN)$/,T=/^\s*\+(?=[\w.])|^\s+|\s+$/g,n=function(e,t,i,r){var n,o=i?t:t.replace(T,"");if(O.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!i&&(o=o.replace(E,(function(e,t,i){return n="x"==(i=i.toLowerCase())?16:"b"==i?2:8,r&&r!=n?e:t})),r&&(n=r,o=o.replace(N,"$1").replace(P,"0.$1")),t!=o))return new q(o,n);if(q.DEBUG)throw Error(a+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},A.absoluteValue=A.abs=function(){var e=new q(this);return e.s<0&&(e.s=1),e},A.comparedTo=function(e,t){return w(this,new q(e,t))},A.decimalPlaces=A.dp=function(e,t){var i,r,n,o=this;if(null!=e)return y(e,0,m),null==t?t=M:y(t,0,8),W(new q(o),e+o.e+1,t);if(!(i=o.c))return null;if(r=((n=i.length-1)-g(this.e/p))*p,n=i[n])for(;n%10==0;n/=10,r--);return r<0&&(r=0),r},A.dividedBy=A.div=function(e,t){return i(this,new q(e,t),F,M)},A.dividedToIntegerBy=A.idiv=function(e,t){return i(this,new q(e,t),0,1)},A.exponentiatedBy=A.pow=function(e,t){var i,r,n,o,l,u,f,h,d=this;if((e=new q(e)).c&&!e.isInteger())throw Error(a+"Exponent not an integer: "+Q(e));if(null!=t&&(t=new q(t)),l=e.e>14,!d.c||!d.c[0]||1==d.c[0]&&!d.e&&1==d.c.length||!e.c||!e.c[0])return h=new q(Math.pow(+Q(d),l?e.s*(2-v(e)):+Q(e))),t?h.mod(t):h;if(u=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new q(NaN);(r=!u&&d.isInteger()&&t.isInteger())&&(d=d.mod(t))}else{if(e.e>9&&(d.e>0||d.e<-1||(0==d.e?d.c[0]>1||l&&d.c[1]>=24e7:d.c[0]<8e13||l&&d.c[0]<=9999975e7)))return o=d.s<0&&v(e)?-0:0,d.e>-1&&(o=1/o),new q(u?1/o:o);U&&(o=s(U/p+2))}for(l?(i=new q(.5),u&&(e.s=1),f=v(e)):f=(n=Math.abs(+Q(e)))%2,h=new q(C);;){if(f){if(!(h=h.times(d)).c)break;o?h.c.length>o&&(h.c.length=o):r&&(h=h.mod(t))}if(n){if(0===(n=c(n/2)))break;f=n%2}else if(W(e=e.times(i),e.e+1,1),e.e>14)f=v(e);else{if(0===(n=+Q(e)))break;f=n%2}d=d.times(d),o?d.c&&d.c.length>o&&(d.c.length=o):r&&(d=d.mod(t))}return r?h:(u&&(h=C.div(h)),t?h.mod(t):o?W(h,U,M,undefined):h)},A.integerValue=function(e){var t=new q(this);return null==e?e=M:y(e,0,8),W(t,t.e+1,e)},A.isEqualTo=A.eq=function(e,t){return 0===w(this,new q(e,t))},A.isFinite=function(){return!!this.c},A.isGreaterThan=A.gt=function(e,t){return w(this,new q(e,t))>0},A.isGreaterThanOrEqualTo=A.gte=function(e,t){return 1===(t=w(this,new q(e,t)))||0===t},A.isInteger=function(){return!!this.c&&g(this.e/p)>this.c.length-2},A.isLessThan=A.lt=function(e,t){return w(this,new q(e,t))<0},A.isLessThanOrEqualTo=A.lte=function(e,t){return-1===(t=w(this,new q(e,t)))||0===t},A.isNaN=function(){return!this.s},A.isNegative=function(){return this.s<0},A.isPositive=function(){return this.s>0},A.isZero=function(){return!!this.c&&0==this.c[0]},A.minus=function(e,t){var i,r,n,o,s=this,c=s.s;if(t=(e=new q(e,t)).s,!c||!t)return new q(NaN);if(c!=t)return e.s=-t,s.plus(e);var a=s.e/p,l=e.e/p,f=s.c,h=e.c;if(!a||!l){if(!f||!h)return f?(e.s=-t,e):new q(h?s:NaN);if(!f[0]||!h[0])return h[0]?(e.s=-t,e):new q(f[0]?s:3==M?-0:0)}if(a=g(a),l=g(l),f=f.slice(),c=a-l){for((o=c<0)?(c=-c,n=f):(l=a,n=h),n.reverse(),t=c;t--;n.push(0));n.reverse()}else for(r=(o=(c=f.length)<(t=h.length))?c:t,c=t=0;t<r;t++)if(f[t]!=h[t]){o=f[t]<h[t];break}if(o&&(n=f,f=h,h=n,e.s=-e.s),(t=(r=h.length)-(i=f.length))>0)for(;t--;f[i++]=0);for(t=u-1;r>c;){if(f[--r]<h[r]){for(i=r;i&&!f[--i];f[i]=t);--f[i],f[r]+=u}f[r]-=h[r]}for(;0==f[0];f.splice(0,1),--l);return f[0]?K(e,f,l):(e.s=3==M?-1:1,e.c=[e.e=0],e)},A.modulo=A.mod=function(e,t){var r,n,o=this;return e=new q(e,t),!o.c||!e.s||e.c&&!e.c[0]?new q(NaN):!e.c||o.c&&!o.c[0]?new q(o):(9==j?(n=e.s,e.s=1,r=i(o,e,0,3),e.s=n,r.s*=n):r=i(o,e,0,j),(e=o.minus(r.times(e))).c[0]||1!=j||(e.s=o.s),e)},A.multipliedBy=A.times=function(e,t){var i,r,n,o,s,c,a,l,f,h,m,b,w,y,v,x=this,S=x.c,_=(e=new q(e,t)).c;if(!(S&&_&&S[0]&&_[0]))return!x.s||!e.s||S&&!S[0]&&!_||_&&!_[0]&&!S?e.c=e.e=e.s=null:(e.s*=x.s,S&&_?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=g(x.e/p)+g(e.e/p),e.s*=x.s,(a=S.length)<(h=_.length)&&(w=S,S=_,_=w,n=a,a=h,h=n),n=a+h,w=[];n--;w.push(0));for(y=u,v=d,n=h;--n>=0;){for(i=0,m=_[n]%v,b=_[n]/v|0,o=n+(s=a);o>n;)i=((l=m*(l=S[--s]%v)+(c=b*l+(f=S[s]/v|0)*m)%v*v+w[o]+i)/y|0)+(c/v|0)+b*f,w[o--]=l%y;w[o]=i}return i?++r:w.splice(0,1),K(e,w,r)},A.negated=function(){var e=new q(this);return e.s=-e.s||null,e},A.plus=function(e,t){var i,r=this,n=r.s;if(t=(e=new q(e,t)).s,!n||!t)return new q(NaN);if(n!=t)return e.s=-t,r.minus(e);var o=r.e/p,s=e.e/p,c=r.c,a=e.c;if(!o||!s){if(!c||!a)return new q(n/0);if(!c[0]||!a[0])return a[0]?e:new q(c[0]?r:0*n)}if(o=g(o),s=g(s),c=c.slice(),n=o-s){for(n>0?(s=o,i=a):(n=-n,i=c),i.reverse();n--;i.push(0));i.reverse()}for((n=c.length)-(t=a.length)<0&&(i=a,a=c,c=i,t=n),n=0;t;)n=(c[--t]=c[t]+a[t]+n)/u|0,c[t]=u===c[t]?0:c[t]%u;return n&&(c=[n].concat(c),++s),K(e,c,s)},A.precision=A.sd=function(e,t){var i,r,n,o=this;if(null!=e&&e!==!!e)return y(e,1,m),null==t?t=M:y(t,0,8),W(new q(o),e,t);if(!(i=o.c))return null;if(r=(n=i.length-1)*p+1,n=i[n]){for(;n%10==0;n/=10,r--);for(n=i[0];n>=10;n/=10,r++);}return e&&o.e+1>r&&(r=o.e+1),r},A.shiftedBy=function(e){return y(e,-9007199254740991,f),this.times("1e"+e)},A.squareRoot=A.sqrt=function(){var e,t,r,n,o,s=this,c=s.c,a=s.s,l=s.e,u=F+4,p=new q("0.5");if(1!==a||!c||!c[0])return new q(!a||a<0&&(!c||c[0])?NaN:c?s:1/0);if(0==(a=Math.sqrt(+Q(s)))||a==1/0?(((t=b(c)).length+l)%2==0&&(t+="0"),a=Math.sqrt(+t),l=g((l+1)/2)-(l<0||l%2),r=new q(t=a==1/0?"5e"+l:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+l)):r=new q(a+""),r.c[0])for((a=(l=r.e)+u)<3&&(a=0);;)if(o=r,r=p.times(o.plus(i(s,o,u,1))),b(o.c).slice(0,a)===(t=b(r.c)).slice(0,a)){if(r.e<l&&--a,"9999"!=(t=t.slice(a-3,a+1))&&(n||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(W(r,r.e+F+2,1),e=!r.times(r).eq(s));break}if(!n&&(W(o,o.e+F+2,0),o.times(o).eq(s))){r=o;break}u+=4,a+=4,n=1}return W(r,r.e+F+1,M,e)},A.toExponential=function(e,t){return null!=e&&(y(e,0,m),e++),V(this,e,t,1)},A.toFixed=function(e,t){return null!=e&&(y(e,0,m),e=e+this.e+1),V(this,e,t)},A.toFormat=function(e,t,i){var r,n=this;if(null==i)null!=e&&t&&"object"==typeof t?(i=t,t=null):e&&"object"==typeof e?(i=e,e=t=null):i=G;else if("object"!=typeof i)throw Error(a+"Argument not an object: "+i);if(r=n.toFixed(e,t),n.c){var o,s=r.split("."),c=+i.groupSize,l=+i.secondaryGroupSize,u=i.groupSeparator||"",p=s[0],f=s[1],h=n.s<0,d=h?p.slice(1):p,m=d.length;if(l&&(o=c,c=l,l=o,m-=o),c>0&&m>0){for(o=m%c||c,p=d.substr(0,o);o<m;o+=c)p+=u+d.substr(o,c);l>0&&(p+=u+d.slice(o)),h&&(p="-"+p)}r=f?p+(i.decimalSeparator||"")+((l=+i.fractionGroupSize)?f.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(i.fractionGroupSeparator||"")):f):p}return(i.prefix||"")+r+(i.suffix||"")},A.toFraction=function(e){var t,r,n,o,s,c,l,u,f,d,m,g,w=this,y=w.c;if(null!=e&&(!(l=new q(e)).isInteger()&&(l.c||1!==l.s)||l.lt(C)))throw Error(a+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+Q(l));if(!y)return new q(w);for(t=new q(C),f=r=new q(C),n=u=new q(C),g=b(y),s=t.e=g.length-w.e-1,t.c[0]=h[(c=s%p)<0?p+c:c],e=!e||l.comparedTo(t)>0?s>0?t:f:l,c=$,$=1/0,l=new q(g),u.c[0]=0;d=i(l,t,0,1),1!=(o=r.plus(d.times(n))).comparedTo(e);)r=n,n=o,f=u.plus(d.times(o=f)),u=o,t=l.minus(d.times(o=t)),l=o;return o=i(e.minus(r),n,0,1),u=u.plus(o.times(f)),r=r.plus(o.times(n)),u.s=f.s=w.s,m=i(f,n,s*=2,M).minus(w).abs().comparedTo(i(u,r,s,M).minus(w).abs())<1?[f,n]:[u,r],$=c,m},A.toNumber=function(){return+Q(this)},A.toPrecision=function(e,t){return null!=e&&y(e,1,m),V(this,e,t,2)},A.toString=function(e){var t,i=this,n=i.s,o=i.e;return null===o?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=o<=R||o>=D?x(b(i.c),o):S(b(i.c),o,"0"):10===e&&z?t=S(b((i=W(new q(i),F+o+1,M)).c),i.e,"0"):(y(e,2,L.length,"Base"),t=r(S(b(i.c),o,"0"),10,e,n,!0)),n<0&&i.c[0]&&(t="-"+t)),t},A.valueOf=A.toJSON=function(){return Q(this)},A._isBigNumber=!0,null!=t&&q.set(t),q}(),n.default=n.BigNumber=n,void 0===(r=function(){return n}.call(t,i,t,e))||(e.exports=r)}()},5596:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});const r=
/**
 * Copyright since 2007 PrestaShop SA and Contributors
 * PrestaShop is an International Registered Trademark & Property of PrestaShop SA
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.md.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to https://devdocs.prestashop.com/ for more information.
 *
 * @author    PrestaShop SA and Contributors <contact@prestashop.com>
 * @copyright Since 2007 PrestaShop SA and Contributors
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 */
class{constructor(e){this.message=e,this.name="LocalizationException"}}},5834:(e,t,i)=>{"use strict";i.d(t,{NumberFormatter:()=>u});var r=i(9663),n=i(5596),o=i(5017);class s extends o.A{constructor(e,t,i,r,o,s,c,a,l,u){if(super(e,t,i,r,o,s,c,a),this.currencySymbol=l,this.currencyCode=u,!this.currencySymbol||"string"!=typeof this.currencySymbol)throw new n.A("Invalid currencySymbol");if(!this.currencyCode||"string"!=typeof this.currencyCode)throw new n.A("Invalid currencyCode")}static getCurrencyDisplay(){return"symbol"}getCurrencySymbol(){return this.currencySymbol}getCurrencyCode(){return this.currencyCode}}const c=s,a=i(912);class l{constructor(e){this.numberSpecification=e}format(e,t){void 0!==t&&(this.numberSpecification=t);const i=Math.abs(e).toFixed(this.numberSpecification.getMaxFractionDigits());let[r,n]=this.extractMajorMinorDigits(i);r=this.splitMajorGroups(r),n=this.adjustMinorDigitsZeroes(n);let o=r;n&&(o+="."+n);const s=this.getCldrPattern(e<0);return o=this.addPlaceholders(o,s),o=this.replaceSymbols(o),o=this.performSpecificReplacements(o),o}extractMajorMinorDigits(e){const t=e.toString().split(".");return[t[0],void 0===t[1]?"":t[1]]}splitMajorGroups(e){if(!this.numberSpecification.isGroupingUsed())return e;const t=e.split("").reverse();let i=[];for(i.push(t.splice(0,this.numberSpecification.getPrimaryGroupSize()));t.length;)i.push(t.splice(0,this.numberSpecification.getSecondaryGroupSize()));i=i.reverse();const r=[];return i.forEach((e=>{r.push(e.reverse().join(""))})),r.join(",")}adjustMinorDigitsZeroes(e){let t=e;return t.length>this.numberSpecification.getMaxFractionDigits()&&(t=t.replace(/0+$/,"")),t.length<this.numberSpecification.getMinFractionDigits()&&(t=t.padEnd(this.numberSpecification.getMinFractionDigits(),"0")),t}getCldrPattern(e){return e?this.numberSpecification.getNegativePattern():this.numberSpecification.getPositivePattern()}replaceSymbols(e){const t=this.numberSpecification.getSymbol(),i={};return i["."]=t.getDecimal(),i[","]=t.getGroup(),i["-"]=t.getMinusSign(),i["%"]=t.getPercentSign(),i["+"]=t.getPlusSign(),this.strtr(e,i)}strtr(e,t){const i=Object.keys(t).map(a);return e.split(RegExp(`(${i.join("|")})`)).map((e=>t[e]||e)).join("")}addPlaceholders(e,t){return t.replace(/#?(,#+)*0(\.[0#]+)*/,e)}performSpecificReplacements(e){return this.numberSpecification instanceof c?e.split("Â¤").join(this.numberSpecification.getCurrencySymbol()):e}static build(e){let t,i;return t=void 0!==e.numberSymbols?new r.A(...e.numberSymbols):new r.A(...e.symbol),i=e.currencySymbol?new c(e.positivePattern,e.negativePattern,t,parseInt(e.maxFractionDigits,10),parseInt(e.minFractionDigits,10),e.groupingUsed,e.primaryGroupSize,e.secondaryGroupSize,e.currencySymbol,e.currencyCode):new o.A(e.positivePattern,e.negativePattern,t,parseInt(e.maxFractionDigits,10),parseInt(e.minFractionDigits,10),e.groupingUsed,e.primaryGroupSize,e.secondaryGroupSize),new l(i)}}const u=l}
/**
 * Copyright since 2007 PrestaShop SA and Contributors
 * PrestaShop is an International Registered Trademark & Property of PrestaShop SA
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.md.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to https://devdocs.prestashop.com/ for more information.
 *
 * @author    PrestaShop SA and Contributors <contact@prestashop.com>
 * @copyright Since 2007 PrestaShop SA and Contributors
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 */,9663:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});var r=i(5596);
/**
 * Copyright since 2007 PrestaShop SA and Contributors
 * PrestaShop is an International Registered Trademark & Property of PrestaShop SA
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.md.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to https://devdocs.prestashop.com/ for more information.
 *
 * @author    PrestaShop SA and Contributors <contact@prestashop.com>
 * @copyright Since 2007 PrestaShop SA and Contributors
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 */const n=class{constructor(e,t,i,r,n,o,s,c,a,l,u){this.decimal=e,this.group=t,this.list=i,this.percentSign=r,this.minusSign=n,this.plusSign=o,this.exponential=s,this.superscriptingExponent=c,this.perMille=a,this.infinity=l,this.nan=u,this.validateData()}getDecimal(){return this.decimal}getGroup(){return this.group}getList(){return this.list}getPercentSign(){return this.percentSign}getMinusSign(){return this.minusSign}getPlusSign(){return this.plusSign}getExponential(){return this.exponential}getSuperscriptingExponent(){return this.superscriptingExponent}getPerMille(){return this.perMille}getInfinity(){return this.infinity}getNan(){return this.nan}validateData(){if(!this.decimal||"string"!=typeof this.decimal)throw new r.A("Invalid decimal");if(!this.group||"string"!=typeof this.group)throw new r.A("Invalid group");if(!this.list||"string"!=typeof this.list)throw new r.A("Invalid symbol list");if(!this.percentSign||"string"!=typeof this.percentSign)throw new r.A("Invalid percentSign");if(!this.minusSign||"string"!=typeof this.minusSign)throw new r.A("Invalid minusSign");if(!this.plusSign||"string"!=typeof this.plusSign)throw new r.A("Invalid plusSign");if(!this.exponential||"string"!=typeof this.exponential)throw new r.A("Invalid exponential");if(!this.superscriptingExponent||"string"!=typeof this.superscriptingExponent)throw new r.A("Invalid superscriptingExponent");if(!this.perMille||"string"!=typeof this.perMille)throw new r.A("Invalid perMille");if(!this.infinity||"string"!=typeof this.infinity)throw new r.A("Invalid infinity");if(!this.nan||"string"!=typeof this.nan)throw new r.A("Invalid nan")}}},5017:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var r=i(5596),n=i(9663);const o=
/**
 * Copyright since 2007 PrestaShop SA and Contributors
 * PrestaShop is an International Registered Trademark & Property of PrestaShop SA
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.md.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to https://devdocs.prestashop.com/ for more information.
 *
 * @author    PrestaShop SA and Contributors <contact@prestashop.com>
 * @copyright Since 2007 PrestaShop SA and Contributors
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 */
class{constructor(e,t,i,o,s,c,a,l){if(this.positivePattern=e,this.negativePattern=t,this.symbol=i,this.maxFractionDigits=o,this.minFractionDigits=o<s?o:s,this.groupingUsed=c,this.primaryGroupSize=a,this.secondaryGroupSize=l,!this.positivePattern||"string"!=typeof this.positivePattern)throw new r.A("Invalid positivePattern");if(!this.negativePattern||"string"!=typeof this.negativePattern)throw new r.A("Invalid negativePattern");if(!(this.symbol&&this.symbol instanceof n.A))throw new r.A("Invalid symbol");if("number"!=typeof this.maxFractionDigits)throw new r.A("Invalid maxFractionDigits");if("number"!=typeof this.minFractionDigits)throw new r.A("Invalid minFractionDigits");if("boolean"!=typeof this.groupingUsed)throw new r.A("Invalid groupingUsed");if("number"!=typeof this.primaryGroupSize)throw new r.A("Invalid primaryGroupSize");if("number"!=typeof this.secondaryGroupSize)throw new r.A("Invalid secondaryGroupSize")}getSymbol(){return this.symbol}getPositivePattern(){return this.positivePattern}getNegativePattern(){return this.negativePattern}getMaxFractionDigits(){return this.maxFractionDigits}getMinFractionDigits(){return this.minFractionDigits}isGroupingUsed(){return this.groupingUsed}getPrimaryGroupSize(){return this.primaryGroupSize}getSecondaryGroupSize(){return this.secondaryGroupSize}}},912:(e,t,i)=>{var r="[object Symbol]",n=/[\\^$.*+?()[\]{}|]/g,o=RegExp(n.source),s="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,c="object"==typeof self&&self&&self.Object===Object&&self,a=s||c||Function("return this")(),l=Object.prototype.toString,u=a.Symbol,p=u?u.prototype:void 0,f=p?p.toString:void 0;function h(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&l.call(e)==r}(e))return f?f.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}e.exports=function(e){var t;return(e=null==(t=e)?"":h(t))&&o.test(e)?e.replace(n,"\\$&"):e}},428:e=>{"use strict";e.exports=window.jQuery}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);(()=>{"use strict";
/**
 * Copyright since 2007 PrestaShop SA and Contributors
 * PrestaShop is an International Registered Trademark & Property of PrestaShop SA
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.md.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to https://devdocs.prestashop.com/ for more information.
 *
 * @author    PrestaShop SA and Contributors <contact@prestashop.com>
 * @copyright Since 2007 PrestaShop SA and Contributors
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 */
const e="#combination_list",t="combination-is-selected",r="bulk-select-all",n="bulk-select-all-in-page",o={navigationTab:"#product_combinations-tab-nav",navigationTarget:"#product_combinations-tab",combinationManager:"#product_combinations_combination_manager",preloader:"#combinations-preloader",emptyState:"#combinations-empty-state",emptyFiltersState:"#combinations-empty-filters-state",combinationsPaginatedList:"#combinations-paginated-list",combinationsFormContainer:"#combinations-list-form-container",combinationsFiltersContainer:"#combinations_filters",filtersSelectorButtons:"#combinations_filters .ps-checkboxes-dropdown button.dropdown-toggle",combinationsGeneratorContainer:"#product_combinations_generator",combinationsTable:`${e}`,combinationsTableBody:`${e} tbody`,combinationIdInputsSelector:".combination-id-input",deleteCombinationSelector:".delete-combination-item",deleteCombinationAllShopsSelector:".delete-combination-all-shops",combinationName:"form .combination-name-row .text-preview-value",paginationContainer:"#combinations-pagination",loadingSpinner:"#productCombinationsLoading",impactOnPriceInputWrapper:".combination-impact-on-price",referenceInputWrapper:".combination-reference",sortableColumns:".ps-sortable-column",combinationItemForm:{isDefaultKey:"combination_item[is_default]",deltaQuantityKey:"combination_item[delta_quantity][delta]",impactOnPriceKey:"combination_item[impact_on_price][value]",referenceKey:"combination_item[reference][value]",tokenKey:"combination_item[_token]"},editionForm:'form[name="combination_form"]',editionFormInputs:'form[name="combination_form"] input, form[name="combination_form"] textarea, form[name="combination_form"] select',editCombinationButtons:".edit-combination-item",tableRow:{isSelectedCombination:`.${t}`,combinationImg:".combination-image",deltaQuantityWrapper:".delta-quantity",deltaQuantityInput:t=>`${e}_combinations_${t}_delta_quantity_delta`,combinationCheckbox:t=>`${e}_combinations_${t}_is_selected`,combinationIdInput:t=>`${e}_combinations_${t}_combination_id`,combinationNameInput:t=>`${e}_combinations_${t}_name`,referenceInput:t=>`${e}_combinations_${t}_reference_value`,impactOnPriceInput:t=>`${e}_combinations_${t}_impact_on_price_value`,finalPriceTeInput:t=>`${e}_combinations_${t}_final_price_te`,quantityInput:t=>`${e}_combinations_${t}_delta_quantity_quantity`,isDefaultInput:t=>`${e}_combinations_${t}_is_default`,editButton:t=>`${e}_combinations_${t}_edit`,deleteButton:t=>`${e}_combinations_${t}_delete`},list:{attributeFilterInputName:"combination-attribute-filter",combinationRow:".combination-list-row",priceImpactTaxExcluded:".combination-impact-on-price-tax-excluded",priceImpactTaxIncluded:".combination-impact-on-price-tax-included",isDefault:".combination-is-default-input",ecoTax:".combination-eco-tax",finalPrice:".combination-final-price",finalPricePreview:".text-preview",modifiedFieldClass:"combination-value-changed",invalidClass:"is-invalid",editionModeClass:"combination-edition-mode",fieldInputs:`.combination-list-row :input:not(.${r}):not(.${t})`,errorAlerts:".combination-list-row .alert-danger",rowActionButtons:".combination-row-actions button, .combination-row-actions .dropdown-toggle",footer:{cancel:"#cancel-combinations-edition",save:"#save-combinations-edition"}},availabilityContainer:".combination-availability",editModal:"#combination-edit-modal",images:{selectorContainer:".combination-images-selector",imageChoice:".combination-image-choice",checkboxContainer:".form-check",checkbox:"input[type=checkbox]"},scrollBar:".attributes-list-overflow",searchInput:"#product-combinations-generate .attributes-search",generateCombinationsButton:".generate-combinations-button",bulkCombinationFormBtn:"#combination-bulk-form-btn",bulkDeleteBtn:".bulk-delete-btn",bulkDeleteBtnAllShopsId:"combination-bulk-delete-btn-all-shops",bulkActionBtn:".bulk-action-btn",bulkActionsDropdownBtn:"#combination-bulk-actions-btn",bulkAllPreviewInput:"#bulk-all-preview",bulkSelectAll:"#bulk-select-all",bulkCheckboxesDropdownButton:"#bulk-all-selection-dropdown-button",commonBulkAllSelector:`.${r}`,bulkSelectAllInPage:`#${n}`,bulkSelectAllInPageId:n,bulkProgressModalId:"bulk-combination-progress-modal",bulkFormModalId:"bulk-combination-form-modal",bulkForm:'form[name="bulk_combination"]',bulkDeltaQuantitySwitchName:"bulk_combination[stock][disabling_switch_delta_quantity]",bulkFixedQuantitySwitchName:"bulk_combination[stock][disabling_switch_fixed_quantity]"},{$:s}=window;class c{constructor(){this.$selectorContainer=s(o.images.selectorContainer),this.init()}init(){s(o.images.checkboxContainer,this.$selectorContainer).hide(),this.$selectorContainer.on("click",o.images.imageChoice,(e=>{if(this.$selectorContainer.hasClass("disabled"))return;const t=s(e.currentTarget),i=s(o.images.checkbox,t),r=i.prop("checked");t.toggleClass("selected",!r),i.prop("checked",!r)}))}}
/**
 * Copyright since 2007 PrestaShop SA and Contributors
 * PrestaShop is an International Registered Trademark & Property of PrestaShop SA
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.md.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to https://devdocs.prestashop.com/ for more information.
 *
 * @author    PrestaShop SA and Contributors <contact@prestashop.com>
 * @copyright Since 2007 PrestaShop SA and Contributors
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 */const a="form[name=combination_form]",l={productSuppliers:"#combination_form_product_suppliers"};var u=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,p=Math.ceil,f=Math.floor,h="[BigNumber Error] ",d=h+"Number primitive has more than 15 significant digits: ",m=1e14,g=14,b=9007199254740991,w=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],y=1e7,v=1e9;function x(e){var t=0|e;return e>0||e===t?t:t-1}function S(e){for(var t,i,r=1,n=e.length,o=e[0]+"";r<n;){for(t=e[r++]+"",i=g-t.length;i--;t="0"+t);o+=t}for(n=o.length;48===o.charCodeAt(--n););return o.slice(0,n+1||1)}function _(e,t){var i,r,n=e.c,o=t.c,s=e.s,c=t.s,a=e.e,l=t.e;if(!s||!c)return null;if(i=n&&!n[0],r=o&&!o[0],i||r)return i?r?0:-c:s;if(s!=c)return s;if(i=s<0,r=a==l,!n||!o)return r?0:!n^i?1:-1;if(!r)return a>l^i?1:-1;for(c=(a=n.length)<(l=o.length)?a:l,s=0;s<c;s++)if(n[s]!=o[s])return n[s]>o[s]^i?1:-1;return a==l?0:a>l^i?1:-1}function I(e,t,i,r){if(e<t||e>i||e!==f(e))throw Error(h+(r||"Argument")+("number"==typeof e?e<t||e>i?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function E(e){var t=e.c.length-1;return x(e.e/g)==t&&e.c[t]%2!=0}function N(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function P(e,t,i){var r,n;if(t<0){for(n=i+".";++t;n+=i);e=n+e}else if(++t>(r=e.length)){for(n=i,t-=r;--t;n+=i);e+=n}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}var O=function e(t){var i,r,n,o,s,c,a,l,O,T,A=q.prototype={constructor:q,toString:null,valueOf:null},C=new q(1),F=20,M=4,R=-7,D=21,B=-1e7,$=1e7,k=!1,j=1,U=0,G={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},L="0123456789abcdefghijklmnopqrstuvwxyz",z=!0;function q(e,t){var i,o,s,c,a,l,p,h,m=this;if(!(m instanceof q))return new q(e,t);if(null==t){if(e&&!0===e._isBigNumber)return m.s=e.s,void(!e.c||e.e>$?m.c=m.e=null:e.e<B?m.c=[m.e=0]:(m.e=e.e,m.c=e.c.slice()));if((l="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,a=e;a>=10;a/=10,c++);return void(c>$?m.c=m.e=null:(m.e=c,m.c=[e]))}h=String(e)}else{if(!u.test(h=String(e)))return n(m,h,l);m.s=45==h.charCodeAt(0)?(h=h.slice(1),-1):1}(c=h.indexOf("."))>-1&&(h=h.replace(".","")),(a=h.search(/e/i))>0?(c<0&&(c=a),c+=+h.slice(a+1),h=h.substring(0,a)):c<0&&(c=h.length)}else{if(I(t,2,L.length,"Base"),10==t&&z)return W(m=new q(e),F+m.e+1,M);if(h=String(e),l="number"==typeof e){if(0*e!=0)return n(m,h,l,t);if(m.s=1/e<0?(h=h.slice(1),-1):1,q.DEBUG&&h.replace(/^0\.0*|\./,"").length>15)throw Error(d+e)}else m.s=45===h.charCodeAt(0)?(h=h.slice(1),-1):1;for(i=L.slice(0,t),c=a=0,p=h.length;a<p;a++)if(i.indexOf(o=h.charAt(a))<0){if("."==o){if(a>c){c=p;continue}}else if(!s&&(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase()))){s=!0,a=-1,c=0;continue}return n(m,String(e),l,t)}l=!1,(c=(h=r(h,t,10,m.s)).indexOf("."))>-1?h=h.replace(".",""):c=h.length}for(a=0;48===h.charCodeAt(a);a++);for(p=h.length;48===h.charCodeAt(--p););if(h=h.slice(a,++p)){if(p-=a,l&&q.DEBUG&&p>15&&(e>b||e!==f(e)))throw Error(d+m.s*e);if((c=c-a-1)>$)m.c=m.e=null;else if(c<B)m.c=[m.e=0];else{if(m.e=c,m.c=[],a=(c+1)%g,c<0&&(a+=g),a<p){for(a&&m.c.push(+h.slice(0,a)),p-=g;a<p;)m.c.push(+h.slice(a,a+=g));a=g-(h=h.slice(a)).length}else a-=p;for(;a--;h+="0");m.c.push(+h)}}else m.c=[m.e=0]}function V(e,t,i,r){var n,o,s,c,a;if(null==i?i=M:I(i,0,8),!e.c)return e.toString();if(n=e.c[0],s=e.e,null==t)a=S(e.c),a=1==r||2==r&&(s<=R||s>=D)?N(a,s):P(a,s,"0");else if(o=(e=W(new q(e),t,i)).e,c=(a=S(e.c)).length,1==r||2==r&&(t<=o||o<=R)){for(;c<t;a+="0",c++);a=N(a,o)}else if(t-=s,a=P(a,o,"0"),o+1>c){if(--t>0)for(a+=".";t--;a+="0");}else if((t+=o-c)>0)for(o+1==c&&(a+=".");t--;a+="0");return e.s<0&&n?"-"+a:a}function H(e,t){for(var i,r,n=1,o=new q(e[0]);n<e.length;n++)(!(r=new q(e[n])).s||(i=_(o,r))===t||0===i&&o.s===t)&&(o=r);return o}function K(e,t,i){for(var r=1,n=t.length;!t[--n];t.pop());for(n=t[0];n>=10;n/=10,r++);return(i=r+i*g-1)>$?e.c=e.e=null:i<B?e.c=[e.e=0]:(e.e=i,e.c=t),e}function W(e,t,i,r){var n,o,s,c,a,l,u,h=e.c,d=w;if(h){e:{for(n=1,c=h[0];c>=10;c/=10,n++);if((o=t-n)<0)o+=g,s=t,a=h[l=0],u=f(a/d[n-s-1]%10);else if((l=p((o+1)/g))>=h.length){if(!r)break e;for(;h.length<=l;h.push(0));a=u=0,n=1,s=(o%=g)-g+1}else{for(a=c=h[l],n=1;c>=10;c/=10,n++);u=(s=(o%=g)-g+n)<0?0:f(a/d[n-s-1]%10)}if(r=r||t<0||null!=h[l+1]||(s<0?a:a%d[n-s-1]),r=i<4?(u||r)&&(0==i||i==(e.s<0?3:2)):u>5||5==u&&(4==i||r||6==i&&(o>0?s>0?a/d[n-s]:0:h[l-1])%10&1||i==(e.s<0?8:7)),t<1||!h[0])return h.length=0,r?(t-=e.e+1,h[0]=d[(g-t%g)%g],e.e=-t||0):h[0]=e.e=0,e;if(0==o?(h.length=l,c=1,l--):(h.length=l+1,c=d[g-o],h[l]=s>0?f(a/d[n-s]%d[s])*c:0),r)for(;;){if(0==l){for(o=1,s=h[0];s>=10;s/=10,o++);for(s=h[0]+=c,c=1;s>=10;s/=10,c++);o!=c&&(e.e++,h[0]==m&&(h[0]=1));break}if(h[l]+=c,h[l]!=m)break;h[l--]=0,c=1}for(o=h.length;0===h[--o];h.pop());}e.e>$?e.c=e.e=null:e.e<B&&(e.c=[e.e=0])}return e}function Q(e){var t,i=e.e;return null===i?e.toString():(t=S(e.c),t=i<=R||i>=D?N(t,i):P(t,i,"0"),e.s<0?"-"+t:t)}return q.clone=e,q.ROUND_UP=0,q.ROUND_DOWN=1,q.ROUND_CEIL=2,q.ROUND_FLOOR=3,q.ROUND_HALF_UP=4,q.ROUND_HALF_DOWN=5,q.ROUND_HALF_EVEN=6,q.ROUND_HALF_CEIL=7,q.ROUND_HALF_FLOOR=8,q.EUCLID=9,q.config=q.set=function(e){var t,i;if(null!=e){if("object"!=typeof e)throw Error(h+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(I(i=e[t],0,v,t),F=i),e.hasOwnProperty(t="ROUNDING_MODE")&&(I(i=e[t],0,8,t),M=i),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((i=e[t])&&i.pop?(I(i[0],-v,0,t),I(i[1],0,v,t),R=i[0],D=i[1]):(I(i,-v,v,t),R=-(D=i<0?-i:i))),e.hasOwnProperty(t="RANGE"))if((i=e[t])&&i.pop)I(i[0],-v,-1,t),I(i[1],1,v,t),B=i[0],$=i[1];else{if(I(i,-v,v,t),!i)throw Error(h+t+" cannot be zero: "+i);B=-($=i<0?-i:i)}if(e.hasOwnProperty(t="CRYPTO")){if((i=e[t])!==!!i)throw Error(h+t+" not true or false: "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw k=!i,Error(h+"crypto unavailable");k=i}else k=i}if(e.hasOwnProperty(t="MODULO_MODE")&&(I(i=e[t],0,9,t),j=i),e.hasOwnProperty(t="POW_PRECISION")&&(I(i=e[t],0,v,t),U=i),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(i=e[t]))throw Error(h+t+" not an object: "+i);G=i}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(i=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(i))throw Error(h+t+" invalid: "+i);z="0123456789"==i.slice(0,10),L=i}}return{DECIMAL_PLACES:F,ROUNDING_MODE:M,EXPONENTIAL_AT:[R,D],RANGE:[B,$],CRYPTO:k,MODULO_MODE:j,POW_PRECISION:U,FORMAT:G,ALPHABET:L}},q.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!q.DEBUG)return!0;var t,i,r=e.c,n=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===o||-1===o)&&n>=-v&&n<=v&&n===f(n)){if(0===r[0]){if(0===n&&1===r.length)return!0;break e}if((t=(n+1)%g)<1&&(t+=g),String(r[0]).length==t){for(t=0;t<r.length;t++)if((i=r[t])<0||i>=m||i!==f(i))break e;if(0!==i)return!0}}}else if(null===r&&null===n&&(null===o||1===o||-1===o))return!0;throw Error(h+"Invalid BigNumber: "+e)},q.maximum=q.max=function(){return H(arguments,-1)},q.minimum=q.min=function(){return H(arguments,1)},q.random=(o=9007199254740992,s=Math.random()*o&2097151?function(){return f(Math.random()*o)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,i,r,n,o,c=0,a=[],l=new q(C);if(null==e?e=F:I(e,0,v),n=p(e/g),k)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(n*=2));c<n;)(o=131072*t[c]+(t[c+1]>>>11))>=9e15?(i=crypto.getRandomValues(new Uint32Array(2)),t[c]=i[0],t[c+1]=i[1]):(a.push(o%1e14),c+=2);c=n/2}else{if(!crypto.randomBytes)throw k=!1,Error(h+"crypto unavailable");for(t=crypto.randomBytes(n*=7);c<n;)(o=281474976710656*(31&t[c])+1099511627776*t[c+1]+4294967296*t[c+2]+16777216*t[c+3]+(t[c+4]<<16)+(t[c+5]<<8)+t[c+6])>=9e15?crypto.randomBytes(7).copy(t,c):(a.push(o%1e14),c+=7);c=n/7}if(!k)for(;c<n;)(o=s())<9e15&&(a[c++]=o%1e14);for(n=a[--c],e%=g,n&&e&&(o=w[g-e],a[c]=f(n/o)*o);0===a[c];a.pop(),c--);if(c<0)a=[r=0];else{for(r=-1;0===a[0];a.splice(0,1),r-=g);for(c=1,o=a[0];o>=10;o/=10,c++);c<g&&(r-=g-c)}return l.e=r,l.c=a,l}),q.sum=function(){for(var e=1,t=arguments,i=new q(t[0]);e<t.length;)i=i.plus(t[e++]);return i},r=function(){var e="0123456789";function t(e,t,i,r){for(var n,o,s=[0],c=0,a=e.length;c<a;){for(o=s.length;o--;s[o]*=t);for(s[0]+=r.indexOf(e.charAt(c++)),n=0;n<s.length;n++)s[n]>i-1&&(null==s[n+1]&&(s[n+1]=0),s[n+1]+=s[n]/i|0,s[n]%=i)}return s.reverse()}return function(r,n,o,s,c){var a,l,u,p,f,h,d,m,g=r.indexOf("."),b=F,w=M;for(g>=0&&(p=U,U=0,r=r.replace(".",""),h=(m=new q(n)).pow(r.length-g),U=p,m.c=t(P(S(h.c),h.e,"0"),10,o,e),m.e=m.c.length),u=p=(d=t(r,n,o,c?(a=L,e):(a=e,L))).length;0==d[--p];d.pop());if(!d[0])return a.charAt(0);if(g<0?--u:(h.c=d,h.e=u,h.s=s,d=(h=i(h,m,b,w,o)).c,f=h.r,u=h.e),g=d[l=u+b+1],p=o/2,f=f||l<0||null!=d[l+1],f=w<4?(null!=g||f)&&(0==w||w==(h.s<0?3:2)):g>p||g==p&&(4==w||f||6==w&&1&d[l-1]||w==(h.s<0?8:7)),l<1||!d[0])r=f?P(a.charAt(1),-b,a.charAt(0)):a.charAt(0);else{if(d.length=l,f)for(--o;++d[--l]>o;)d[l]=0,l||(++u,d=[1].concat(d));for(p=d.length;!d[--p];);for(g=0,r="";g<=p;r+=a.charAt(d[g++]));r=P(r,u,a.charAt(0))}return r}}(),i=function(){function e(e,t,i){var r,n,o,s,c=0,a=e.length,l=t%y,u=t/y|0;for(e=e.slice();a--;)c=((n=l*(o=e[a]%y)+(r=u*o+(s=e[a]/y|0)*l)%y*y+c)/i|0)+(r/y|0)+u*s,e[a]=n%i;return c&&(e=[c].concat(e)),e}function t(e,t,i,r){var n,o;if(i!=r)o=i>r?1:-1;else for(n=o=0;n<i;n++)if(e[n]!=t[n]){o=e[n]>t[n]?1:-1;break}return o}function i(e,t,i,r){for(var n=0;i--;)e[i]-=n,n=e[i]<t[i]?1:0,e[i]=n*r+e[i]-t[i];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,n,o,s,c){var a,l,u,p,h,d,b,w,y,v,S,_,I,E,N,P,O,T=r.s==n.s?1:-1,A=r.c,C=n.c;if(!(A&&A[0]&&C&&C[0]))return new q(r.s&&n.s&&(A?!C||A[0]!=C[0]:C)?A&&0==A[0]||!C?0*T:T/0:NaN);for(y=(w=new q(T)).c=[],T=o+(l=r.e-n.e)+1,c||(c=m,l=x(r.e/g)-x(n.e/g),T=T/g|0),u=0;C[u]==(A[u]||0);u++);if(C[u]>(A[u]||0)&&l--,T<0)y.push(1),p=!0;else{for(E=A.length,P=C.length,u=0,T+=2,(h=f(c/(C[0]+1)))>1&&(C=e(C,h,c),A=e(A,h,c),P=C.length,E=A.length),I=P,S=(v=A.slice(0,P)).length;S<P;v[S++]=0);O=C.slice(),O=[0].concat(O),N=C[0],C[1]>=c/2&&N++;do{if(h=0,(a=t(C,v,P,S))<0){if(_=v[0],P!=S&&(_=_*c+(v[1]||0)),(h=f(_/N))>1)for(h>=c&&(h=c-1),b=(d=e(C,h,c)).length,S=v.length;1==t(d,v,b,S);)h--,i(d,P<b?O:C,b,c),b=d.length,a=1;else 0==h&&(a=h=1),b=(d=C.slice()).length;if(b<S&&(d=[0].concat(d)),i(v,d,S,c),S=v.length,-1==a)for(;t(C,v,P,S)<1;)h++,i(v,P<S?O:C,S,c),S=v.length}else 0===a&&(h++,v=[0]);y[u++]=h,v[0]?v[S++]=A[I]||0:(v=[A[I]],S=1)}while((I++<E||null!=v[0])&&T--);p=null!=v[0],y[0]||y.splice(0,1)}if(c==m){for(u=1,T=y[0];T>=10;T/=10,u++);W(w,o+(w.e=u+l*g-1)+1,s,p)}else w.e=l,w.r=+p;return w}}(),c=/^(-?)0([xbo])(?=\w[\w.]*$)/i,a=/^([^.]+)\.$/,l=/^\.([^.]+)$/,O=/^-?(Infinity|NaN)$/,T=/^\s*\+(?=[\w.])|^\s+|\s+$/g,n=function(e,t,i,r){var n,o=i?t:t.replace(T,"");if(O.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!i&&(o=o.replace(c,(function(e,t,i){return n="x"==(i=i.toLowerCase())?16:"b"==i?2:8,r&&r!=n?e:t})),r&&(n=r,o=o.replace(a,"$1").replace(l,"0.$1")),t!=o))return new q(o,n);if(q.DEBUG)throw Error(h+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},A.absoluteValue=A.abs=function(){var e=new q(this);return e.s<0&&(e.s=1),e},A.comparedTo=function(e,t){return _(this,new q(e,t))},A.decimalPlaces=A.dp=function(e,t){var i,r,n,o=this;if(null!=e)return I(e,0,v),null==t?t=M:I(t,0,8),W(new q(o),e+o.e+1,t);if(!(i=o.c))return null;if(r=((n=i.length-1)-x(this.e/g))*g,n=i[n])for(;n%10==0;n/=10,r--);return r<0&&(r=0),r},A.dividedBy=A.div=function(e,t){return i(this,new q(e,t),F,M)},A.dividedToIntegerBy=A.idiv=function(e,t){return i(this,new q(e,t),0,1)},A.exponentiatedBy=A.pow=function(e,t){var i,r,n,o,s,c,a,l,u=this;if((e=new q(e)).c&&!e.isInteger())throw Error(h+"Exponent not an integer: "+Q(e));if(null!=t&&(t=new q(t)),s=e.e>14,!u.c||!u.c[0]||1==u.c[0]&&!u.e&&1==u.c.length||!e.c||!e.c[0])return l=new q(Math.pow(+Q(u),s?e.s*(2-E(e)):+Q(e))),t?l.mod(t):l;if(c=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new q(NaN);(r=!c&&u.isInteger()&&t.isInteger())&&(u=u.mod(t))}else{if(e.e>9&&(u.e>0||u.e<-1||(0==u.e?u.c[0]>1||s&&u.c[1]>=24e7:u.c[0]<8e13||s&&u.c[0]<=9999975e7)))return o=u.s<0&&E(e)?-0:0,u.e>-1&&(o=1/o),new q(c?1/o:o);U&&(o=p(U/g+2))}for(s?(i=new q(.5),c&&(e.s=1),a=E(e)):a=(n=Math.abs(+Q(e)))%2,l=new q(C);;){if(a){if(!(l=l.times(u)).c)break;o?l.c.length>o&&(l.c.length=o):r&&(l=l.mod(t))}if(n){if(0===(n=f(n/2)))break;a=n%2}else if(W(e=e.times(i),e.e+1,1),e.e>14)a=E(e);else{if(0===(n=+Q(e)))break;a=n%2}u=u.times(u),o?u.c&&u.c.length>o&&(u.c.length=o):r&&(u=u.mod(t))}return r?l:(c&&(l=C.div(l)),t?l.mod(t):o?W(l,U,M,undefined):l)},A.integerValue=function(e){var t=new q(this);return null==e?e=M:I(e,0,8),W(t,t.e+1,e)},A.isEqualTo=A.eq=function(e,t){return 0===_(this,new q(e,t))},A.isFinite=function(){return!!this.c},A.isGreaterThan=A.gt=function(e,t){return _(this,new q(e,t))>0},A.isGreaterThanOrEqualTo=A.gte=function(e,t){return 1===(t=_(this,new q(e,t)))||0===t},A.isInteger=function(){return!!this.c&&x(this.e/g)>this.c.length-2},A.isLessThan=A.lt=function(e,t){return _(this,new q(e,t))<0},A.isLessThanOrEqualTo=A.lte=function(e,t){return-1===(t=_(this,new q(e,t)))||0===t},A.isNaN=function(){return!this.s},A.isNegative=function(){return this.s<0},A.isPositive=function(){return this.s>0},A.isZero=function(){return!!this.c&&0==this.c[0]},A.minus=function(e,t){var i,r,n,o,s=this,c=s.s;if(t=(e=new q(e,t)).s,!c||!t)return new q(NaN);if(c!=t)return e.s=-t,s.plus(e);var a=s.e/g,l=e.e/g,u=s.c,p=e.c;if(!a||!l){if(!u||!p)return u?(e.s=-t,e):new q(p?s:NaN);if(!u[0]||!p[0])return p[0]?(e.s=-t,e):new q(u[0]?s:3==M?-0:0)}if(a=x(a),l=x(l),u=u.slice(),c=a-l){for((o=c<0)?(c=-c,n=u):(l=a,n=p),n.reverse(),t=c;t--;n.push(0));n.reverse()}else for(r=(o=(c=u.length)<(t=p.length))?c:t,c=t=0;t<r;t++)if(u[t]!=p[t]){o=u[t]<p[t];break}if(o&&(n=u,u=p,p=n,e.s=-e.s),(t=(r=p.length)-(i=u.length))>0)for(;t--;u[i++]=0);for(t=m-1;r>c;){if(u[--r]<p[r]){for(i=r;i&&!u[--i];u[i]=t);--u[i],u[r]+=m}u[r]-=p[r]}for(;0==u[0];u.splice(0,1),--l);return u[0]?K(e,u,l):(e.s=3==M?-1:1,e.c=[e.e=0],e)},A.modulo=A.mod=function(e,t){var r,n,o=this;return e=new q(e,t),!o.c||!e.s||e.c&&!e.c[0]?new q(NaN):!e.c||o.c&&!o.c[0]?new q(o):(9==j?(n=e.s,e.s=1,r=i(o,e,0,3),e.s=n,r.s*=n):r=i(o,e,0,j),(e=o.minus(r.times(e))).c[0]||1!=j||(e.s=o.s),e)},A.multipliedBy=A.times=function(e,t){var i,r,n,o,s,c,a,l,u,p,f,h,d,b,w,v=this,S=v.c,_=(e=new q(e,t)).c;if(!(S&&_&&S[0]&&_[0]))return!v.s||!e.s||S&&!S[0]&&!_||_&&!_[0]&&!S?e.c=e.e=e.s=null:(e.s*=v.s,S&&_?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=x(v.e/g)+x(e.e/g),e.s*=v.s,(a=S.length)<(p=_.length)&&(d=S,S=_,_=d,n=a,a=p,p=n),n=a+p,d=[];n--;d.push(0));for(b=m,w=y,n=p;--n>=0;){for(i=0,f=_[n]%w,h=_[n]/w|0,o=n+(s=a);o>n;)i=((l=f*(l=S[--s]%w)+(c=h*l+(u=S[s]/w|0)*f)%w*w+d[o]+i)/b|0)+(c/w|0)+h*u,d[o--]=l%b;d[o]=i}return i?++r:d.splice(0,1),K(e,d,r)},A.negated=function(){var e=new q(this);return e.s=-e.s||null,e},A.plus=function(e,t){var i,r=this,n=r.s;if(t=(e=new q(e,t)).s,!n||!t)return new q(NaN);if(n!=t)return e.s=-t,r.minus(e);var o=r.e/g,s=e.e/g,c=r.c,a=e.c;if(!o||!s){if(!c||!a)return new q(n/0);if(!c[0]||!a[0])return a[0]?e:new q(c[0]?r:0*n)}if(o=x(o),s=x(s),c=c.slice(),n=o-s){for(n>0?(s=o,i=a):(n=-n,i=c),i.reverse();n--;i.push(0));i.reverse()}for((n=c.length)-(t=a.length)<0&&(i=a,a=c,c=i,t=n),n=0;t;)n=(c[--t]=c[t]+a[t]+n)/m|0,c[t]=m===c[t]?0:c[t]%m;return n&&(c=[n].concat(c),++s),K(e,c,s)},A.precision=A.sd=function(e,t){var i,r,n,o=this;if(null!=e&&e!==!!e)return I(e,1,v),null==t?t=M:I(t,0,8),W(new q(o),e,t);if(!(i=o.c))return null;if(r=(n=i.length-1)*g+1,n=i[n]){for(;n%10==0;n/=10,r--);for(n=i[0];n>=10;n/=10,r++);}return e&&o.e+1>r&&(r=o.e+1),r},A.shiftedBy=function(e){return I(e,-9007199254740991,b),this.times("1e"+e)},A.squareRoot=A.sqrt=function(){var e,t,r,n,o,s=this,c=s.c,a=s.s,l=s.e,u=F+4,p=new q("0.5");if(1!==a||!c||!c[0])return new q(!a||a<0&&(!c||c[0])?NaN:c?s:1/0);if(0==(a=Math.sqrt(+Q(s)))||a==1/0?(((t=S(c)).length+l)%2==0&&(t+="0"),a=Math.sqrt(+t),l=x((l+1)/2)-(l<0||l%2),r=new q(t=a==1/0?"5e"+l:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+l)):r=new q(a+""),r.c[0])for((a=(l=r.e)+u)<3&&(a=0);;)if(o=r,r=p.times(o.plus(i(s,o,u,1))),S(o.c).slice(0,a)===(t=S(r.c)).slice(0,a)){if(r.e<l&&--a,"9999"!=(t=t.slice(a-3,a+1))&&(n||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(W(r,r.e+F+2,1),e=!r.times(r).eq(s));break}if(!n&&(W(o,o.e+F+2,0),o.times(o).eq(s))){r=o;break}u+=4,a+=4,n=1}return W(r,r.e+F+1,M,e)},A.toExponential=function(e,t){return null!=e&&(I(e,0,v),e++),V(this,e,t,1)},A.toFixed=function(e,t){return null!=e&&(I(e,0,v),e=e+this.e+1),V(this,e,t)},A.toFormat=function(e,t,i){var r,n=this;if(null==i)null!=e&&t&&"object"==typeof t?(i=t,t=null):e&&"object"==typeof e?(i=e,e=t=null):i=G;else if("object"!=typeof i)throw Error(h+"Argument not an object: "+i);if(r=n.toFixed(e,t),n.c){var o,s=r.split("."),c=+i.groupSize,a=+i.secondaryGroupSize,l=i.groupSeparator||"",u=s[0],p=s[1],f=n.s<0,d=f?u.slice(1):u,m=d.length;if(a&&(o=c,c=a,a=o,m-=o),c>0&&m>0){for(o=m%c||c,u=d.substr(0,o);o<m;o+=c)u+=l+d.substr(o,c);a>0&&(u+=l+d.slice(o)),f&&(u="-"+u)}r=p?u+(i.decimalSeparator||"")+((a=+i.fractionGroupSize)?p.replace(new RegExp("\\d{"+a+"}\\B","g"),"$&"+(i.fractionGroupSeparator||"")):p):u}return(i.prefix||"")+r+(i.suffix||"")},A.toFraction=function(e){var t,r,n,o,s,c,a,l,u,p,f,d,m=this,b=m.c;if(null!=e&&(!(a=new q(e)).isInteger()&&(a.c||1!==a.s)||a.lt(C)))throw Error(h+"Argument "+(a.isInteger()?"out of range: ":"not an integer: ")+Q(a));if(!b)return new q(m);for(t=new q(C),u=r=new q(C),n=l=new q(C),d=S(b),s=t.e=d.length-m.e-1,t.c[0]=w[(c=s%g)<0?g+c:c],e=!e||a.comparedTo(t)>0?s>0?t:u:a,c=$,$=1/0,a=new q(d),l.c[0]=0;p=i(a,t,0,1),1!=(o=r.plus(p.times(n))).comparedTo(e);)r=n,n=o,u=l.plus(p.times(o=u)),l=o,t=a.minus(p.times(o=t)),a=o;return o=i(e.minus(r),n,0,1),l=l.plus(o.times(u)),r=r.plus(o.times(n)),l.s=u.s=m.s,f=i(u,n,s*=2,M).minus(m).abs().comparedTo(i(l,r,s,M).minus(m).abs())<1?[u,n]:[l,r],$=c,f},A.toNumber=function(){return+Q(this)},A.toPrecision=function(e,t){return null!=e&&I(e,1,v),V(this,e,t,2)},A.toString=function(e){var t,i=this,n=i.s,o=i.e;return null===o?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=o<=R||o>=D?N(S(i.c),o):P(S(i.c),o,"0"):10===e&&z?t=P(S((i=W(new q(i),F+o+1,M)).c),i.e,"0"):(I(e,2,L.length,"Base"),t=r(P(S(i.c),o,"0"),10,e,n,!0)),n<0&&i.c[0]&&(t="-"+t)),t},A.valueOf=A.toJSON=function(){return Q(this)},A._isBigNumber=!0,A[Symbol.toStringTag]="BigNumber",A[Symbol.for("nodejs.util.inspect.custom")]=A.valueOf,null!=t&&q.set(t),q}();const T=O,A=/(?:(?!^-\d+))[^\d]+(?=.*[^\d])/g,C=/(?:(?!^-\d+))([^\d]+)/g,F=e=>{let t=e;const i=t.match(C);if(null===i)return t;if(i.length>1){const e=new Set(i);if(1===Array.from(e).length)return t.replace(C,"")}return t=t.replace(A,"").replace(C,"."),t};
/**
 * Copyright since 2007 PrestaShop SA and Contributors
 * PrestaShop is an International Registered Trademark & Property of PrestaShop SA
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.md.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to https://devdocs.prestashop.com/ for more information.
 *
 * @author    PrestaShop SA and Contributors <contact@prestashop.com>
 * @copyright Since 2007 PrestaShop SA and Contributors
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 */
const{$:M}=window;class R{constructor(e,t,i,r){this.object=e,this.modelKey=t,this.value=i,this.previousValue=r,this.propagationStopped=!1}stopPropagation(){this.propagationStopped=!0}isPropagationStopped(){return this.propagationStopped}}class D{constructor(e,t){e.length||console.error("Invalid empty form as input"),this.$form=e,this.fullModelMapping=t,this.model={},this.modelMapping={},this.modelMapping={},this.formMapping={},this.watchedProperties={},this.initFormMapping(),this.updateFullObject(),this.watchUpdates()}getModel(){return this.model}getInputsFor(e){if(!Object.prototype.hasOwnProperty.call(this.fullModelMapping,e))return;let t=this.fullModelMapping[e];Array.isArray(t)||(t=[t]);const i=[],r=this.$form.get(0);return r?(t.forEach((e=>{const t=r.querySelectorAll(`[name="${e}"]`);t.length&&t.forEach((e=>{i.push(e)}))})),i.length?M(i):void 0):void 0}set(e,t){Object.prototype.hasOwnProperty.call(this.modelMapping,e)&&t!==this.getValue(e)&&(this.updateInputValue(e,t),this.updateObjectByKey(e,t))}watch(e,t){(Array.isArray(e)?e:[e]).forEach((e=>{Object.prototype.hasOwnProperty.call(this.watchedProperties,e)||(this.watchedProperties[e]=[]),this.watchedProperties[e].push(t)}))}getBigNumber(e){const t=this.getValue(e);return void 0===t?void 0:new T(F(t))}getValue(e){const t=e.split(".");return M.serializeJSON.deepGet(this.model,t)}updateFullObject(){const e=this.$form.find(":input:disabled").removeAttr("disabled"),t=this.$form.serializeArray();e.prop("disabled",!0);const i={};t.forEach((e=>{i[e.name]=e.value})),this.model={},Object.keys(this.modelMapping).forEach((e=>{const t=this.modelMapping[e],r=i[t];this.updateObjectByKey(e,r)}))}watchUpdates(){this.$form.on("change dp.change",":input",(e=>this.inputUpdated(e)))}inputUpdated(e){const t=e.currentTarget;if(!Object.prototype.hasOwnProperty.call(this.formMapping,t.name))return;const i=this.getInputValue(M(t)),r=this.formMapping[t.name];this.updateInputValue(r,i,t.name),this.updateObjectByKey(r,i)}getInputValue(e){return e.is(":checkbox")?e.is(":checked"):e.val()}updateInputValue(e,t,i){const r=this.fullModelMapping[e];Array.isArray(r)?r.forEach((e=>{i!==e&&this.updateInputByName(e,t)})):i!==r&&this.updateInputByName(r,t)}updateInputByName(e,t){const i=M(`[name="${e}"]`,this.$form);i.length?this.hasSameValue(this.getInputValue(i),t)||(i.is(":checkbox")?(i.val(t?1:0),i.prop("checked",!!t)):i.val(t),"select2"===i.data("toggle")&&i.trigger("change"),this.triggerChangeEvent(e)):console.error(`Input with name ${e} is not present in form.`)}triggerChangeEvent(e){const t=document.querySelector(`[name="${e}"]`);if(!t)return;const i=document.createEvent("HTMLEvents");i.initEvent("change",!1,!0),t.dispatchEvent(i)}hasSameValue(e,t){if("boolean"==typeof e||"boolean"==typeof t)return e===t;const i=new T(F(t));return!!new T(F(e)).isEqualTo(i)||t==e}updateObjectByKey(e,t){const i=e.split("."),r=M.serializeJSON.deepGet(this.model,i);if(r===t)return;M.serializeJSON.deepSet(this.model,i,t);const n=new R(this.model,e,t,r);if(Object.prototype.hasOwnProperty.call(this.watchedProperties,e)){this.watchedProperties[e].forEach((e=>{n.isPropagationStopped()||e(n)}))}}initFormMapping(){Object.keys(this.fullModelMapping).forEach((e=>{const t=this.fullModelMapping[e];Array.isArray(t)?t.forEach((t=>{this.addFormMapping(t,e)})):this.addFormMapping(t,e)}))}addFormMapping(e,t){Object.prototype.hasOwnProperty.call(this.formMapping,e)?console.error(`The form element ${e} is already mapped to ${this.formMapping[e]}`):(this.formMapping[e]=t,this.modelMapping[t]=e)}}
/**
 * Copyright since 2007 PrestaShop SA and Contributors
 * PrestaShop is an International Registered Trademark & Property of PrestaShop SA
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.md.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to https://devdocs.prestashop.com/ for more information.
 *
 * @author    PrestaShop SA and Contributors <contact@prestashop.com>
 * @copyright Since 2007 PrestaShop SA and Contributors
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 */const B={"impact.priceTaxExcluded":"combination_form[price_impact][price_tax_excluded]","impact.priceTaxIncluded":"combination_form[price_impact][price_tax_included]","impact.unitPriceTaxExcluded":"combination_form[price_impact][unit_price_tax_excluded]","impact.unitPriceTaxIncluded":"combination_form[price_impact][unit_price_tax_included]","price.ecotaxTaxExcluded":"combination_form[price_impact][ecotax_tax_excluded]","price.ecotaxTaxIncluded":"combination_form[price_impact][ecotax_tax_included]","price.wholesalePrice":"combination_form[price_impact][wholesale_price]","price.finalPriceTaxExcluded":"combination_form[price_impact][final_price_tax_excluded]","price.finalPriceTaxIncluded":"combination_form[price_impact][final_price_tax_included]","product.priceTaxExcluded":"combination_form[price_impact][product_price_tax_excluded]","product.taxRate":"combination_form[price_impact][product_tax_rate]","product.ecotaxTaxExcluded":"combination_form[price_impact][product_ecotax_tax_excluded]","suppliers.defaultSupplierId":"combination_form[default_supplier_id]"};var $=i(1594),k=i.n($),j=i(5834);
/**
 * Copyright since 2007 PrestaShop SA and Contributors
 * PrestaShop is an International Registered Trademark & Property of PrestaShop SA
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.md.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to https://devdocs.prestashop.com/ for more information.
 *
 * @author    PrestaShop SA and Contributors <contact@prestashop.com>
 * @copyright Since 2007 PrestaShop SA and Contributors
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 */
class U{constructor(e,t){this.eventEmitter=t,this.mapper=new D(e,B);const i=this.mapper.getInputsFor("impact.priceTaxExcluded");this.precision=i.data("displayPricePrecision"),this.numberFormatter=j.NumberFormatter.build(null==i?void 0:i.data("priceSpecification"));this.mapper.watch(["impact.priceTaxExcluded","impact.priceTaxIncluded","impact.unitPriceTaxExcluded","impact.unitPriceTaxIncluded","price.ecotaxTaxExcluded","price.ecotaxTaxIncluded","price.wholesalePrice"],(e=>this.updateCombinationPrices(e))),this.updateFinalPrices()}getCombination(){return this.mapper.getModel()}watch(e,t){this.mapper.watch(e,t)}set(e,t){this.mapper.set(e,t)}displayPrice(e){return this.numberFormatter.format(e.toNumber())}updateCombinationPrices(e){var t,i,r,n,o,s;if(new(k())(e.value).isNaN())return e.stopPropagation(),void this.mapper.set(e.modelKey,new(k())(0).toFixed(this.precision));const c=this.getTaxRatio();if(!c.isNaN()){switch(e.modelKey){case"impact.priceTaxIncluded":{const e=null!=(t=this.mapper.getBigNumber("impact.priceTaxIncluded"))?t:new(k())(0);this.mapper.set("impact.priceTaxExcluded",e.dividedBy(c).toFixed(this.precision));break}case"impact.priceTaxExcluded":{const e=null!=(i=this.mapper.getBigNumber("impact.priceTaxExcluded"))?i:new(k())(0);this.mapper.set("impact.priceTaxIncluded",e.times(c).toFixed(this.precision));break}case"price.ecotaxTaxIncluded":{const e=this.getEcoTaxRatio(),t=null!=(r=this.mapper.getBigNumber("price.ecotaxTaxIncluded"))?r:new(k())(0);this.mapper.set("price.ecotaxTaxExcluded",t.dividedBy(e).toFixed(this.precision));break}case"price.ecotaxTaxExcluded":{const e=this.getEcoTaxRatio(),t=(null!=(n=this.mapper.getBigNumber("price.ecotaxTaxExcluded"))?n:new(k())(0)).times(e),i=this.getEcotaxTaxIncluded(t);this.updateImpactForEcotax(i),this.mapper.set("price.ecotaxTaxIncluded",t.toFixed(this.precision));break}case"impact.unitPriceTaxIncluded":{const e=null!=(o=this.mapper.getBigNumber("impact.unitPriceTaxIncluded"))?o:new(k())(0);this.mapper.set("impact.unitPriceTaxExcluded",e.dividedBy(c).toFixed(this.precision));break}case"impact.unitPriceTaxExcluded":{const e=null!=(s=this.mapper.getBigNumber("impact.unitPriceTaxExcluded"))?s:new(k())(0);this.mapper.set("impact.unitPriceTaxIncluded",e.times(c).toFixed(this.precision));break}}this.updateFinalPrices()}}updateImpactForEcotax(e){var t,i;const r=this.getTaxRatio(),n=null!=(t=this.mapper.getBigNumber("price.finalPriceTaxIncluded"))?t:new(k())(0),o=(null!=(i=this.mapper.getBigNumber("product.priceTaxExcluded"))?i:new(k())(0)).times(r),s=n.minus(e).minus(o);this.mapper.set("impact.priceTaxExcluded",s.dividedBy(r).toFixed(this.precision))}updateFinalPrices(){var e,t;const i=this.getTaxRatio(),r=this.getEcoTaxRatio();let n=null!=(e=this.mapper.getBigNumber("product.priceTaxExcluded"))?e:new(k())(0),o=null!=(t=this.mapper.getBigNumber("impact.priceTaxExcluded"))?t:new(k())(0),s=this.getEcotaxTaxExcluded();n.isNaN()&&(n=new(k())(0)),o.isNaN()&&(o=new(k())(0)),s.isNaN()&&(s=new(k())(0));const c=s.times(r),a=n.plus(o),l=a.plus(s),u=a.times(i).plus(c);this.mapper.set("price.finalPriceTaxExcluded",l.toFixed(this.precision)),this.mapper.set("price.finalPriceTaxIncluded",u.toFixed(this.precision));const p=this.mapper.getInputsFor("price.finalPriceTaxExcluded"),f=this.mapper.getInputsFor("price.finalPriceTaxIncluded");p&&p.siblings(".final-price-preview").text(this.displayPrice(l)),f&&f.siblings(".final-price-preview").text(this.displayPrice(u))}getEcotaxTaxExcluded(){var e,t;const i=null!=(e=this.mapper.getBigNumber("price.ecotaxTaxExcluded"))?e:new(k())(0);return i.isNegative()||i.isZero()?null!=(t=this.mapper.getBigNumber("product.ecotaxTaxExcluded"))?t:new(k())(0):i}getEcotaxTaxIncluded(e){var t;if(!e.isNegative()&&!e.isZero())return e;const i=null!=(t=this.mapper.getBigNumber("product.ecotaxTaxExcluded"))?t:new(k())(0),r=this.getEcoTaxRatio();return i.times(r)}getTaxRatio(){var e;let t=null!=(e=this.mapper.getBigNumber("product.taxRate"))?e:new(k())(0);return t.isNaN()&&(t=new(k())(0)),t.dividedBy(100).plus(1)}getEcoTaxRatio(){const e=this.mapper.getInputsFor("price.ecotaxTaxExcluded");if(!e)return new(k())(1);let t;try{t=new(k())(e.data("taxRate"))}catch(e){t=new(k())(NaN)}return t.isNaN()&&(t=new(k())(0)),t.dividedBy(100).plus(1)}}var G=i(428);
/**
 * Copyright since 2007 PrestaShop SA and Contributors
 * PrestaShop is an International Registered Trademark & Property of PrestaShop SA
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.md.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to https://devdocs.prestashop.com/ for more information.
 *
 * @author    PrestaShop SA and Contributors <contact@prestashop.com>
 * @copyright Since 2007 PrestaShop SA and Contributors
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 */class L{constructor(e,t,i){this.defaultSupplierId=t,this.wholesalePrice=i,this.map=(e=>{const t=(t,i)=>`${e}_${t}_${i}`;return{productSuppliersCollection:`${e}`,productSuppliersCollectionRow:".product-suppliers-collection-row",productSuppliersTable:`${e} table`,productsSuppliersTableBody:`${e} table tbody`,productsSuppliersRows:`${e} table tbody .product_supplier_row`,productsSupplierRowSelector:".product_supplier_row",productSupplierRow:{supplierIdInput:e=>t(e,"supplier_id"),supplierNameInput:e=>t(e,"supplier_name"),productSupplierIdInput:e=>t(e,"product_supplier_id"),referenceInput:e=>t(e,"reference"),priceInput:e=>t(e,"price_tax_excluded"),currencyIdInput:e=>t(e,"currency_id"),supplierNamePreview:e=>`#product_supplier_row_${e} .supplier_name .preview`,currencySymbol:e=>`#product_supplier_row_${e} .money-type .input-group-text`}}})(e),this.$productSuppliersCollection=G(this.map.productSuppliersCollection),this.$collectionRow=this.$productSuppliersCollection.parents(this.map.productSuppliersCollectionRow),this.$productsTable=G(this.map.productSuppliersTable),this.$productsTableBody=G(this.map.productsSuppliersTableBody),this.selectedSuppliers=[],this.productSuppliers={},this.prototypeTemplate=this.$productSuppliersCollection.data("prototype"),this.prototypeName=this.$productSuppliersCollection.data("prototypeName"),this.baseDataForSupplier=this.getBaseDataForSupplier(),this.init()}setSelectedSuppliers(e){this.selectedSuppliers=e;const t=[];this.selectedSuppliers.forEach((e=>{t.push(e.supplierId),this.addSupplier(e)}));Object.keys(this.productSuppliers).forEach((e=>{t.includes(e)||this.removeSupplier(e)})),this.renderSuppliers(),this.memorizeCurrentSuppliers(),this.toggleRowVisibility()}setDefaultSupplierId(e){this.defaultSupplierId=e,this.selectedSuppliers.forEach((t=>{t.isDefault=t.supplierId===e})),this.memorizeCurrentSuppliers()}init(){this.memorizeCurrentSuppliers(),this.selectedSuppliers=this.getSuppliersFromTable(),this.toggleRowVisibility(),this.$productsTable.on("change",":input",(()=>{this.memorizeCurrentSuppliers()})),this.$productsTable.on("change",'select[name$="[currency_id]"]',(e=>{var t;const i=null==(t=G(e.target).find(":selected"))?void 0:t.attr("symbol");G(e.target).parents(this.map.productsSupplierRowSelector).find(".money-type .input-group-prepend .input-group-text").html(i)}))}addSupplier(e){const t=this.getDefaultProductSupplier(),i=(null==t?void 0:t.price)||this.wholesalePrice;if(void 0===this.productSuppliers[e.supplierId]){const t=Object.create(this.baseDataForSupplier);t.supplierId=e.supplierId,t.supplierName=e.supplierName,t.price=i,this.productSuppliers[e.supplierId]=t}else{const t=this.productSuppliers[e.supplierId];t.removed&&(t.removed=!1,t.price=i)}}removeSupplier(e){Object.prototype.hasOwnProperty.call(this.productSuppliers,e)&&(this.productSuppliers[e].removed=!0)}memorizeCurrentSuppliers(){const e=document.querySelectorAll(this.map.productsSuppliersRows);e.length&&e.forEach((e=>{const t=e.dataset.supplierIndex,i=G(this.map.productSupplierRow.supplierIdInput(t)).val();this.productSuppliers[i]={supplierId:i,productSupplierId:G(this.map.productSupplierRow.productSupplierIdInput(t)).val(),supplierName:G(this.map.productSupplierRow.supplierNameInput(t)).val(),reference:G(this.map.productSupplierRow.referenceInput(t)).val(),price:G(this.map.productSupplierRow.priceInput(t)).val(),currencyId:G(this.map.productSupplierRow.currencyIdInput(t)).val(),isDefault:i===this.defaultSupplierId,removed:!1}}))}getSuppliersFromTable(){const e=[],t=document.querySelectorAll(this.map.productsSuppliersRows);return t.length?(t.forEach((t=>{const i=t.dataset.supplierIndex,r=G(this.map.productSupplierRow.supplierIdInput(i)).val();e.push({supplierId:r,supplierName:G(this.map.productSupplierRow.supplierNameInput(i)).val(),isDefault:r===this.defaultSupplierId})})),e):e}renderSuppliers(){this.$productsTableBody.empty(),this.selectedSuppliers.forEach((e=>{var t;const i=this.productSuppliers[e.supplierId];if(i.removed)return;const r=this.prototypeTemplate.replace(new RegExp(this.prototypeName,"g"),i.supplierId);this.$productsTableBody.append(r);const n=this.map.productSupplierRow;G(n.supplierIdInput(i.supplierId)).val(i.supplierId),G(n.supplierNamePreview(i.supplierId)).html(i.supplierName),G(n.supplierNameInput(i.supplierId)).val(i.supplierName),G(n.productSupplierIdInput(i.supplierId)).val(i.productSupplierId),G(n.referenceInput(i.supplierId)).val(i.reference),G(n.priceInput(i.supplierId)).val(i.price),G(n.currencyIdInput(i.supplierId)).val(i.currencyId);const o=null==(t=G(n.currencyIdInput(i.supplierId)).find(":selected"))?void 0:t.attr("symbol");o&&G(n.currencySymbol(i.supplierId)).html(o)}))}toggleRowVisibility(){0!==this.selectedSuppliers.length?this.showCollectionRow():this.hideCollectionRow()}showCollectionRow(){this.$collectionRow.removeClass("d-none")}hideCollectionRow(){this.$collectionRow.addClass("d-none")}getBaseDataForSupplier(){const e=(new DOMParser).parseFromString(this.prototypeTemplate,"text/html");return{removed:!1,productSupplierId:this.extractFromPrototype(this.map.productSupplierRow.productSupplierIdInput,e),reference:this.extractFromPrototype(this.map.productSupplierRow.referenceInput,e),price:this.extractFromPrototype(this.map.productSupplierRow.priceInput,e),currencyId:this.extractFromPrototype(this.map.productSupplierRow.currencyIdInput,e),isDefault:!1}}extractFromPrototype(e,t){var i;const r=t.querySelector(e(this.prototypeName));return null!=(i=null==r?void 0:r.value)?i:null}getDefaultProductSupplier(){return Object.values(this.productSuppliers).find((e=>e.isDefault))}}
/**
 * Copyright since 2007 PrestaShop SA and Contributors
 * PrestaShop is an International Registered Trademark & Property of PrestaShop SA
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.md.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to https://devdocs.prestashop.com/ for more information.
 *
 * @author    PrestaShop SA and Contributors <contact@prestashop.com>
 * @copyright Since 2007 PrestaShop SA and Contributors
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 */
const{$:z}=window;z((()=>{window.prestashop.component.initComponents(["TranslatableField","TinyMCEEditor","TranslatableInput","EventEmitter","TextWithLengthCounter","DeltaQuantityInput","DisablingSwitch","ModifyAllShopsCheckbox"]);const e=z(a),{eventEmitter:t}=window.prestashop.instance,i=new U(e,t);new L(l.productSuppliers,i.getCombination().suppliers.defaultSupplierId,i.getCombination().price.wholesalePrice),new c}))})(),window.combination_form={}})();